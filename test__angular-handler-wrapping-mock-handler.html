<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>Angular Handler Directive wrapping mock handler</title>
        <script src="mock_handler.js" type="text/javascript"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.18/angular.min.js"></script>
        <script src="https://code.jquery.com/jquery-1.11.0.min.js"></script>
        <script src="dist/angular-forte-handler.js"></script>
        <script type="text/javascript">

            (function(angular) {
                'use strict';
                angular.module('app', ['angularForteHandler'])
                    .controller('Controller', ['$scope', '$timeout', function($scope, $timeout) {
                    }]);
            })(window.angular);

            // //////////////   MOCK additions begin:  control command button click handlers //////
            $(document).ready(function () {
                $('#connect').on('click', function () {
                    forteDeviceHandler.triggerConnected(true);
                });

                $('#disconnect').on('click', function () {
                    forteDeviceHandler.triggerConnected(false);
                });

                $('#acknowledge').on('click', function () {
                    forteDeviceHandler.setBehavior('acknowledge');
                });

                $('#succeed').on('click', function () {
                    forteDeviceHandler.setBehavior('succeed');
                });

                $('#decline').on('click', function () {
                    forteDeviceHandler.setBehavior('decline');
                });

                $('#error').on('click', function () {
                    forteDeviceHandler.setBehavior('error');
                });

                $('#timeout').on('click', function () {
                    forteDeviceHandler.setBehavior('timeout');
                });
            });

            // //////////////   MOCK additions end ///////////////////////////////////////////////////
        </script>

    </head>
    <body ng-app="app">
        <div>
            <!-- MOCK control command buttons begin -->
                    <!-- sets whether the mock 'device' is connected or not -->
            <input type="button" id="connect" value="connect"> <br>
            <input type="button" id="disconnect" value="disconnect"> <br>
            <br>
                    <!-- sets how the mock will respond when handing requests -->
            <input type="button" id="acknowledge" value="acknowledge"> <br>
            <input type="button" id="succeed" value="succeed"> <br>
            <input type="button" id="decline" value="decline"> <br>
            <input type="button" id="error" value="error"><br>
            <input type="button" id="timeout" value="timeout"><br>
            <br>
            <!-- MOCK control command buttons end -->
        </div>
        <div ng-controller="Controller">

            Merchant ID: <input ng-model='merchantId' /><br />
            Amount: $<input ng-model="amount" type="text" /><br />
            tax: $<input ng-model='tax' type="text" /><br />
            <div>Result: {{result.message}}<br>
            <button angular-forte-handler 
                is-connected='isConnected' 
                is-processing='isProcessing' 
                pg-merchant-id='merchantId' 
                pg-total-amount='amount' 
                pg-sales-tax-amount='tax' 
                pg_transaction_type="'CREDITCARD_SALE'" 
                result='result' ng-disabled="!isConnected || isProcessing">Submit</button>
        </div>
    </body>
</html>
